<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Laura Gast">
<meta name="dcterms.date" content="2024-03-12">
<meta name="description" content="Font choice, disfluency effect, and focusing attention.">

<title>LauraGast.com - Making Things Difficult:</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../lbg_option1.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-37GLESE70H"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-37GLESE70H', { 'anonymize_ip': true});
</script>

  <!-- HTML Meta Tags -->
  <title>Making Things Difficult: Font choice, disfluency effect, and focusing attention.</title>
  <meta name="description" content="Why choosing a typeface always seems harder than it should be.">

  <!-- Facebook Meta Tags -->
  <meta property="og:url" content="https://lauragast.com/posts/2024-03-12-disfluency/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="LauraGast.com - Making Things Difficult:">
  <meta property="og:description" content="Font choice, disfluency effect, and focusing attention.">
  <meta property="og:image" content="https://lauragast.com/posts/2024-03-10-disfluency/preview.png">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="lauragast.com">
  <meta property="twitter:url" content="https://lauragast.com/posts/2024-03-12-disfluency/">
  <meta name="twitter:title" content="LauraGast.com - Making Things Difficult:">
  <meta name="twitter:description" content="Font choice, disfluency effect, and focusing attention.">
  <meta name="twitter:image" content="https://lauragast.com/posts/2024-03-12-disfluency/preview.png">

  <!-- Meta Tags Generated via https://www.opengraph.xyz -->
        
<link rel="stylesheet" href="https://kit.fontawesome.com/a2be1b1c16.css" crossorigin="anonymous">


<meta name="twitter:title" content="LauraGast.com - Making Things Difficult: ">
<meta name="twitter:description" content="Font choice, disfluency effect, and focusing attention.">
<meta name="twitter:image" content="https://lauragast.com/posts/2024-03-12-disfluency/preview.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../lbg_option1_wbg.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">LauraGast.com</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html" rel="" target="">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../blog.html" rel="" target="">
 <span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../talks.html" rel="" target="">
 <span class="menu-text">Talks</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../blog.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.instagram.com/laura_brianna/" rel="" target=""><i class="bi bi-instagram" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.threads.net/@laura_brianna" rel="" target="">
 <span class="menu-text"><i class="fa-brands fa-threads" aria-label="threads"></i></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Sections</h2>
   
  <ul class="collapse">
  <li><a href="#harder-to-read-harder-to-do" id="toc-harder-to-read-harder-to-do" class="nav-link active" data-scroll-target="#harder-to-read-harder-to-do">Harder to Read, Harder to Do</a></li>
  <li><a href="#harder-to-read-easier-to-remember" id="toc-harder-to-read-easier-to-remember" class="nav-link" data-scroll-target="#harder-to-read-easier-to-remember">Harder to Read, Easier (?) to Remember</a></li>
  <li><a href="#but-everyone-isnt-just-like-you" id="toc-but-everyone-isnt-just-like-you" class="nav-link" data-scroll-target="#but-everyone-isnt-just-like-you">But everyone isn’t just like you</a></li>
  <li><a href="#well-so-what" id="toc-well-so-what" class="nav-link" data-scroll-target="#well-so-what">Well so what?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Making Things Difficult:</h1>
<p class="subtitle lead">Font choice, disfluency effect, and focusing attention.</p>
  <div class="quarto-categories">
    <div class="quarto-category">focus</div>
    <div class="quarto-category">narrative</div>
    <div class="quarto-category">typeface</div>
    <div class="quarto-category">disfluency</div>
  </div>
  </div>

<div>
  <div class="description">
    Font choice, disfluency effect, and focusing attention.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Laura Gast </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 12, 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="harder-to-read-harder-to-do" class="level2">
<h2 class="anchored" data-anchor-id="harder-to-read-harder-to-do">Harder to Read, Harder to Do</h2>
<p>In a statement that will surprise very few people, “If It’s Hard to Read, It’s Hard to Do”<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>, which makes it a perfect title for a 2008 research study by H Song and N Schwarz at the University of Michigan<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Note that while this particular study is quite small (n = 20), it has been replicated by other studies with larger groups, of different ages, and with slightly different tasks, but the general premise and findings holds true.</p>
<p>The studies generally go like this.</p>
<p>A group of people are given a fairly simple health routine instruction sheet. They’re asked to read the instructions or exercises, and then evaluate how easy or difficult the routine would be, how long they thing it might take them, and how likely they are to incorporate it into their lives. (Sometimes they’re asked to actually do the exercises.)</p>
<p>The only differences are that some people are given the routine in a clean sans-serif font, like Arial, and others are given the routine in a slightly harder-to read font, like a Brush stroke.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="font_example_study.png" class="img-fluid figure-img"></p>
</figure>
</div>
<p>As expected, participants had generally equal recall of the instructions in the two conditions and found the cleaner (Arial) font easier to read. Somewhat surprisingly (or not?) those that got the easier to read font also estimated that the activities in the routine would take less time and that those exercises would feel easier and faster. Furthermore, they also responded that they had a higher willingness to include the routine as part of their regular habits if they had the easier to read font.</p>
<p>Obvious statement of the day: people are more likely to do something they think is easy.</p>
<p>Slightly less obvious statement of the day: people think things are easier if you put it in an easy to read font.</p>
<p>If doing some action is “no big deal”, its easier to get someone to do it. This is fantastic to remember if you’re trying to help people start a new habit, or make some change, or pick up take out on the way home from work<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>.</p>
<p>But let’s throw a wrench into this. What if you don’t want something to be “no big deal”? What if you’ve got some results that are nuanced, counter-intuitive, or really need to sink in strongly with your audience?</p>
</section>
<section id="harder-to-read-easier-to-remember" class="level2">
<h2 class="anchored" data-anchor-id="harder-to-read-easier-to-remember">Harder to Read, Easier (?) to Remember</h2>
<p>Here’s where things get interesting. While ease of reading is undeniably important, some research suggests a paradoxical benefit to introducing a slight degree of difficulty into the reading process. This is referred to as the “disfluency effect”.</p>
<p>I’m just going to let Kühl and Eitel summarize the concept of disfluency:</p>
<blockquote class="blockquote">
<p>the concept of <em>disfluency</em> refers to the metacognitive experience of ease or difficulty associated with completing a mental task. If task completion is perceived as easy or fluent, one often uses heuristics and intuitions to process information. If task completion is perceived as difficult or disfluent, by contrast, one is more likely to engage in effortful and analytic processing</p>
</blockquote>
<p>The ELI5<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> version of this is if you think something is “too easy”, you won’t care about it as much, think its “less important”, and not spend any effort moving it from short term memory to long term memory. But if you think something is just a <em>little bit</em> difficult, you’ll work a <em>little bit</em> harder to get it into your brain and work to fully understand it.</p>
<p>The disfluency effect posits that when something requires a little bit more effort to decode, it can lead to better memory and recall. Basically, if your audience is already at least <em>partly</em> bought-in to what you’re presenting, it might be worthwhile to (counterintuitively) actually make it <em>harder</em> for them to read.</p>
<p>There is also disfluency as measured by pauses like ums and uhs in in a speech stream. Obviously, these are related to spoken word, not written word, and have a different implication that this short (ish) blog post is focusing on, but there is increasing research in the utility of these spoken disfluencies in memory and recall<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>. And the emerging evidence is intriguing. (I’ll try to cover this in a future post.)</p>
<p>So if something seems “too easy” when you read it, you may read it too fast, skip over salient information, and not remember it later. But if something is “too hard” to read, you may give up entirely or not understand it fully. But the arena of disfluency in typeface or font choice being an <em>improvement</em> over something easier to read is still a bit muddy.</p>
</section>
<section id="but-everyone-isnt-just-like-you" class="level2">
<h2 class="anchored" data-anchor-id="but-everyone-isnt-just-like-you">But everyone isn’t just like you</h2>
<p>Obviously theres some sweet spot between “too easy” and “too hard”.</p>
<p>Unfortunately (or fortunately?), that line is different for everyone.</p>
<p>Fortunately (or unfortunately?) Adobe is investing a lot of research into fonts and typefaces and comprehension. It’s a less-common instance of Corporate Research being made widely available and making the world just a little bit better! Because they’re sharing their work, I’m going to just give a basic summary and link you below. I highly recommend going to read their blog posts (which all link to the published research summarized within).</p>
<p>“The need to personalize fonts for each individual reader” is a great blog post summarizing some Adobe research that shows that there is no “best” font for everyone. They picked several pretty readable fonts (no fancy brush scripts here) and had people select their preference. And while people read their fastest font 35% faster than their slowest font, that wasn’t always their “favorite” font, and fast reading vs slow reading didn’t seem to matter (90% comprehension on multiple-choice questions across all fonts).<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> <a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a></p>
<p>If you’re interested in this kind of research, I also <em>highly</em> recommend The Readability Consortium, which is a partnership between Adobe, Google, UCF, and the NGO Readability Matters, which does a lot of research and outreach into, well, what it says on the tin: Readability.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a></p>
</section>
<section id="well-so-what" class="level2">
<h2 class="anchored" data-anchor-id="well-so-what">Well so what?</h2>
<p>At the end of the day, the tl;dr is to pick something you like and that you think qualifies as “easy to read”.</p>
<p>Then run it by your coworkers and friends. Try it in a related but slightly different font. Don’t try to get “fancy” when it is critical that your audience understand and fully absorb your message.</p>
<p>Just remember that even your choice of font face matters.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>In the great tradition of scientific articles (a tradition I enjoy, thank you very much), the full study involves a semi colon and should be written as “If It’s Hard to Read, It’s Hard to Do: Processing Fluency Affects Effort Prediction and Motivation”.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Song, H., &amp; Schwarz, N. (2008). If It’s Hard to Read, It’s Hard to Do: Processing Fluency Affects Effort Prediction and Motivation. Psychological Science, 19(10), 986-988. <a href="https://doi.org/10.1111/j.1467-9280.2008.02189.x" class="uri">https://doi.org/10.1111/j.1467-9280.2008.02189.x</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>Okuhara, Tsuyoshi et al.&nbsp;“Influence of high versus low readability level of written health information on self-efficacy: A randomized controlled study of the processing fluency effect.”&nbsp;<em>Health psychology open</em>vol.&nbsp;7,1 2055102920905627. 12 Feb.&nbsp;2020, doi:10.1177/2055102920905627<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>ELI5 = internet speak for “Explain it like I’m 5 years old”<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>Diachek, Evgeniia, and Sarah Brown-Schmidt. “The effect of disfluency on memory for what was said.”&nbsp;<em>Journal of experimental psychology. Learning, memory, and cognition</em>&nbsp;vol.&nbsp;49,8 (2023): 1306-1324. doi:10.1037/xlm0001156<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p><a href="https://blog.adobe.com/en/publish/2022/05/10/the-need-to-personalize-fonts-for-each-individual-reader" class="uri">https://blog.adobe.com/en/publish/2022/05/10/the-need-to-personalize-fonts-for-each-individual-reader</a><a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn7"><p>This study also shows I probably shouldn’t use Open Sans, one of my fav typefaces. Sigh…<a href="#fnref7" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn8"><p><a href="https://readabilitymatters.org" class="uri">https://readabilitymatters.org</a><a href="#fnref8" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>